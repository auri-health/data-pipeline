# Daily Summaries Table Field Mappings

This document describes the fields in the daily_summaries table and explains how they are populated from source data.

## Table Fields

### Identification Fields
- `id`: UUID primary key generated for each daily summary record
- `user_id`: UUID of the user this summary belongs to
- `device_id`: UUID of the device that generated this data
- `source`: Data source identifier (e.g., "garmin")
- `date`: The date for which this summary is generated

### Activity Metrics
- `total_steps`: Total number of steps taken during the day
  - Source: Garmin daily summary data
  - Transformation: Direct mapping from steps field

- `total_distance_meters`: Total distance covered in meters
  - Source: Garmin daily summary data
  - Transformation: Direct mapping from distance field

### Caloric Data
- `total_calories`: Total calories burned (including BMR)
  - Source: Garmin daily summary data
  - Transformation: Sum of active calories and BMR calories

- `active_calories`: Calories burned through activity
  - Source: Garmin daily summary data
  - Transformation: Direct mapping from activeKilocalories

- `bmr_calories`: Basal Metabolic Rate calories
  - Source: Garmin daily summary data
  - Transformation: Direct mapping from BMR field

### Activity Duration Metrics
- `highly_active_seconds`: Time spent in high-intensity activities
  - Source: Garmin daily summary data
  - Transformation: Converted from minutes to seconds if provided

- `active_seconds`: Time spent being active
  - Source: Garmin daily summary data
  - Transformation: Sum of all active duration fields

- `sedentary_seconds`: Time spent being sedentary
  - Source: Garmin daily summary data
  - Transformation: Direct mapping from sedentary duration

- `sleeping_seconds`: Total time spent sleeping
  - Source: Garmin sleep data
  - Transformation: Sum of all sleep duration fields

### Intensity Minutes
- `moderate_intensity_minutes`: Time spent in moderate intensity activities
  - Source: Garmin daily summary data
  - Transformation: Direct mapping from moderateIntensityMinutes

- `vigorous_intensity_minutes`: Time spent in vigorous intensity activities
  - Source: Garmin daily summary data
  - Transformation: Direct mapping from vigorousIntensityMinutes

### Heart Rate Metrics
- `min_heart_rate`: Minimum heart rate recorded for the day
  - Source: Garmin heart rate data
  - Transformation: Minimum value from heart rate samples

- `max_heart_rate`: Maximum heart rate recorded for the day
  - Source: Garmin heart rate data
  - Transformation: Maximum value from heart rate samples

- `resting_heart_rate`: Resting heart rate for the day
  - Source: Garmin daily summary data
  - Transformation: Direct mapping from restingHeartRate

### Stress Metrics
- `avg_stress_level`: Average stress level for the day
  - Source: Garmin stress data
  - Transformation: Average of stress samples

### Metadata
- `activity_count`: Number of distinct activities recorded
  - Source: Calculated field
  - Transformation: Count of activity records for the day

- `extracted_at`: Timestamp when the data was extracted
  - Source: System generated
  - Transformation: Current timestamp at extraction time

- `created_at`: Timestamp when the record was created
  - Source: System generated
  - Transformation: Current timestamp at record creation

## Data Processing Flow

1. Raw data is received from Garmin API
2. Data is parsed and transformed according to the mappings above
3. Daily summary is generated by aggregating data from multiple sources:
   - Daily activity summaries
   - Sleep records
   - Heart rate samples
   - Stress measurements
   - Individual activities

## Notes

- All time-based fields are stored in seconds for consistency
- Distance is stored in meters
- Null values indicate that the data was not available from the source
- The source field allows for future expansion to other data providers 